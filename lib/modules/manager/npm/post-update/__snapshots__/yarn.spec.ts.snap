// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`modules/manager/npm/post-update/yarn > allows and ignore scripts 1`] = `
[
  {
    "cmd": "yarn install --mode=update-lockfile",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > catches errors 1`] = `
[
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > does not use global cache if zero install is detected 1`] = `
[
  {
    "cmd": "yarn install",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > generates lock files using yarn v1.22.0 1`] = `
[
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "npx yarn-deduplicate --strategy fewer",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "npx yarn-deduplicate --strategy highest",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": "/tmp/renovate/cache/yarn",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > generates lock files using yarn v2.1.0 1`] = `
[
  {
    "cmd": "yarn install",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > generates lock files using yarn v2.2.0 1`] = `
[
  {
    "cmd": "yarn install",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn dedupe --strategy highest",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > generates lock files using yarn v3.0.0 1`] = `
[
  {
    "cmd": "yarn install --mode=update-lockfile",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn dedupe --strategy highest --mode=update-lockfile",
    "options": {
      "cwd": "/some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": "/tmp/renovate/cache/berry",
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > only skips build if skipInstalls is false 1`] = `
[
  {
    "cmd": "yarn install --mode=skip-build",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn dedupe --strategy highest --mode=skip-build",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file maintenance in subdirectory independent workspaces using yarn v1.22.0 1`] = `
[
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "npx yarn-deduplicate --strategy fewer",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "npx yarn-deduplicate --strategy highest",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file maintenance in subdirectory independent workspaces using yarn v2.1.0 1`] = `
[
  {
    "cmd": "yarn install",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file maintenance in subdirectory independent workspaces using yarn v2.2.0 1`] = `
[
  {
    "cmd": "yarn install",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn dedupe --strategy highest",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file maintenance in subdirectory independent workspaces using yarn v3.0.0 1`] = `
[
  {
    "cmd": "yarn install --mode=update-lockfile",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn dedupe --strategy highest --mode=update-lockfile",
    "options": {
      "cwd": "some-dir/sub_workspace",
      "cwdFile": "some-dir/sub_workspace/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file maintenance using yarn v1.22.0 1`] = `
[
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "npx yarn-deduplicate --strategy fewer",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "npx yarn-deduplicate --strategy highest",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file maintenance using yarn v2.1.0 1`] = `
[
  {
    "cmd": "yarn install",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file maintenance using yarn v2.2.0 1`] = `
[
  {
    "cmd": "yarn install",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn dedupe --strategy highest",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file updates and full install using yarn v1.22.0 1`] = `
[
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "yarn upgrade some-dep --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file updates using yarn v1.22.0 1`] = `
[
  {
    "cmd": "yarn install --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
  {
    "cmd": "yarn upgrade some-dep --ignore-engines --ignore-platform --network-timeout 100000 --ignore-scripts",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_CACHE_FOLDER": undefined,
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.10.0",
          "toolName": "yarn-slim",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file updates using yarn v2.1.0 1`] = `
[
  {
    "cmd": "yarn install",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn up -R some-dep",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_ENABLE_SCRIPTS": "0",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs lock file updates using yarn v3.0.0 1`] = `
[
  {
    "cmd": "yarn install --mode=update-lockfile",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn up -R some-dep --mode=update-lockfile",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs yarn binary update using yarn v1.22.0 1`] = `
[
  {
    "cmd": "yarn set version 3.0.1",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn install --mode=update-lockfile",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;

exports[`modules/manager/npm/post-update/yarn > performs yarn binary update using yarn v2.1.0 1`] = `
[
  {
    "cmd": "yarn set version 3.0.1",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
  {
    "cmd": "yarn install --mode=update-lockfile",
    "options": {
      "cwd": "some-dir",
      "cwdFile": "some-dir/yarn.lock",
      "docker": {},
      "env": {
        "CI": "true",
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_HTTP_TIMEOUT": "100000",
      },
      "extraEnv": {
        "CI": "true",
        "NPM_CONFIG_CACHE": undefined,
        "YARN_ENABLE_GLOBAL_CACHE": "1",
        "YARN_ENABLE_IMMUTABLE_INSTALLS": "false",
        "YARN_GLOBAL_FOLDER": undefined,
        "YARN_HTTP_TIMEOUT": "100000",
        "npm_config_store": undefined,
      },
      "maxBuffer": 10485760,
      "stderr": "pipe",
      "stdin": "pipe",
      "stdout": "pipe",
      "timeout": 900000,
      "toolConstraints": [
        {
          "constraint": "16.16.0",
          "toolName": "node",
        },
        {
          "constraint": "^1.22.18",
          "toolName": "yarn",
        },
      ],
    },
  },
]
`;
